<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Final Project | MAD9124</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Full-stack: API Development">
    
    <link rel="preload" href="/s2024/assets/css/0.styles.70738741.css" as="style"><link rel="preload" href="/s2024/assets/js/app.40d35fb0.js" as="script"><link rel="preload" href="/s2024/assets/js/2.d13f26af.js" as="script"><link rel="preload" href="/s2024/assets/js/1.f6f71081.js" as="script"><link rel="preload" href="/s2024/assets/js/42.fcb0df3f.js" as="script"><link rel="preload" href="/s2024/assets/js/31.e47a0c3f.js" as="script"><link rel="prefetch" href="/s2024/assets/js/10.700b6097.js"><link rel="prefetch" href="/s2024/assets/js/11.ed8a0934.js"><link rel="prefetch" href="/s2024/assets/js/12.9b4b523d.js"><link rel="prefetch" href="/s2024/assets/js/13.07dd1a9d.js"><link rel="prefetch" href="/s2024/assets/js/14.b96c24af.js"><link rel="prefetch" href="/s2024/assets/js/15.b144383e.js"><link rel="prefetch" href="/s2024/assets/js/16.d16dea2a.js"><link rel="prefetch" href="/s2024/assets/js/17.b4e1a4e8.js"><link rel="prefetch" href="/s2024/assets/js/18.1f2ac466.js"><link rel="prefetch" href="/s2024/assets/js/19.e668708c.js"><link rel="prefetch" href="/s2024/assets/js/20.4f30b3de.js"><link rel="prefetch" href="/s2024/assets/js/21.248f91f3.js"><link rel="prefetch" href="/s2024/assets/js/22.29f49c1a.js"><link rel="prefetch" href="/s2024/assets/js/23.b8ac89c9.js"><link rel="prefetch" href="/s2024/assets/js/24.e2934475.js"><link rel="prefetch" href="/s2024/assets/js/25.fce0b0a1.js"><link rel="prefetch" href="/s2024/assets/js/26.de8d994d.js"><link rel="prefetch" href="/s2024/assets/js/27.c7ef8247.js"><link rel="prefetch" href="/s2024/assets/js/28.75604c91.js"><link rel="prefetch" href="/s2024/assets/js/29.1b506275.js"><link rel="prefetch" href="/s2024/assets/js/3.8c4cc701.js"><link rel="prefetch" href="/s2024/assets/js/30.787c7c10.js"><link rel="prefetch" href="/s2024/assets/js/32.baab7363.js"><link rel="prefetch" href="/s2024/assets/js/33.aa620044.js"><link rel="prefetch" href="/s2024/assets/js/34.81206c0b.js"><link rel="prefetch" href="/s2024/assets/js/35.d62ca566.js"><link rel="prefetch" href="/s2024/assets/js/36.1835e393.js"><link rel="prefetch" href="/s2024/assets/js/37.5098b7b5.js"><link rel="prefetch" href="/s2024/assets/js/38.3ddeba96.js"><link rel="prefetch" href="/s2024/assets/js/39.3f5b8ef9.js"><link rel="prefetch" href="/s2024/assets/js/4.a03d1287.js"><link rel="prefetch" href="/s2024/assets/js/40.b63f2a79.js"><link rel="prefetch" href="/s2024/assets/js/41.5cb461bc.js"><link rel="prefetch" href="/s2024/assets/js/43.3a92d7d8.js"><link rel="prefetch" href="/s2024/assets/js/44.5c466f1c.js"><link rel="prefetch" href="/s2024/assets/js/45.c7c3dc1a.js"><link rel="prefetch" href="/s2024/assets/js/46.286df3e7.js"><link rel="prefetch" href="/s2024/assets/js/47.8363bb83.js"><link rel="prefetch" href="/s2024/assets/js/48.56c3e93e.js"><link rel="prefetch" href="/s2024/assets/js/49.b0be2d4e.js"><link rel="prefetch" href="/s2024/assets/js/5.ed6c1368.js"><link rel="prefetch" href="/s2024/assets/js/50.b89e2a53.js"><link rel="prefetch" href="/s2024/assets/js/51.7249e197.js"><link rel="prefetch" href="/s2024/assets/js/52.87fc5cdd.js"><link rel="prefetch" href="/s2024/assets/js/53.56f24714.js"><link rel="prefetch" href="/s2024/assets/js/54.fae6ee81.js"><link rel="prefetch" href="/s2024/assets/js/55.b1e6a4dd.js"><link rel="prefetch" href="/s2024/assets/js/56.eadf21bf.js"><link rel="prefetch" href="/s2024/assets/js/57.d912e614.js"><link rel="prefetch" href="/s2024/assets/js/6.45d9b7e6.js"><link rel="prefetch" href="/s2024/assets/js/7.017a2e0d.js"><link rel="prefetch" href="/s2024/assets/js/vendors~docsearch.38838867.js">
    <link rel="stylesheet" href="/s2024/assets/css/0.styles.70738741.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/s2024/" class="home-link router-link-active"><!----> <span class="site-name">MAD9124</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/s2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/s2024/modules/" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/s2024/deliverables/" class="nav-link router-link-active">
  Deliverables
</a></div><div class="nav-item"><a href="/s2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/s2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/s2024/modules/" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/s2024/deliverables/" class="nav-link router-link-active">
  Deliverables
</a></div><div class="nav-item"><a href="/s2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Introduction</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/s2024/overview/" class="sidebar-link">Overview</a></li><li><a href="/s2024/overview/contacts.html" class="sidebar-link">Contacts</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Content Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="final-project"><a href="#final-project" class="header-anchor">#</a> Final Project</h2> <h1 id="crapr"><a href="#crapr" class="header-anchor">#</a> CRAPR</h1> <div class="custom-block tip"><p class="custom-block-title">Due before 11:59 pm on Thursday August 15, 2024.</p> <p>This is the final deadline. There will be no extensions.
Counts for 24% of your MAD9124 final grade.</p></div> <h2 id="joint-project"><a href="#joint-project" class="header-anchor">#</a> Joint Project</h2> <p>The final project will be a two part joint assignment between MAD9124 and MAD9022. You will build a complete full-stack solution. The web service API portion will be graded for MAD9124, and the front-end application functionality, design, and usability will be graded for MAD9022.</p> <h2 id="the-brief"><a href="#the-brief" class="header-anchor">#</a> The Brief</h2> <p>Using Node.js, Express, Mongoose and MongoDB, you will build the RESTful API web service for a prototype of a fictitious application to track the users' crap. This initial proof of concept (PoC) will have limited capabilities but should demonstrate the potential of a full-scale application.</p> <p>Each registered user (referred to as <code>seller</code> can create a post with information about a piece of crap they want to get rid of. Other users (referred to as <code>buyer</code>) can see this crap, and if they want it, a back and forth happens until the crap is eventually marked as taken away.</p> <p>Your PoC will allow authenticated users to perform basic CRUD operations on the <strong>crap</strong> resource. There will also be a <strong>user</strong> resource handled solely by Google and Passport for authentication. Each crap will have an <em>owner</em> relationship to the owning <code>User</code> model, and a <em>buyer</em> relationship to the buying <code>User</code> model.</p> <h2 id="core-requirements"><a href="#core-requirements" class="header-anchor">#</a> Core Requirements</h2> <ul><li><p>Implement basic user management functions</p> <ul><li><p>generate a JWT token with Google OAuth and Passport</p></li> <li><p>Protected routes require a valid <code>Bearer</code> JWT in the <code>Authorization</code> header.</p></li></ul></li> <li><p>Middleware functions should be employed to avoid repetitive route handler code.</p></li> <li><p>All requests containing user/client supplied data should be sanitized to protect against XSS and Query Injection attacks.</p></li> <li><p>All schema validation errors should be caught and returned to the client with the correct status code and error message.</p></li></ul> <h3 id="response-payload"><a href="#response-payload" class="header-anchor">#</a> Response Payload</h3> <ul><li>All responses will be in the form of a JSON formatted object.</li> <li>This payload object must include one of (but not both at the same time) a <code>data</code> property or an <code>error</code> property.</li> <li>For &quot;list&quot; routes, the <code>data</code> property must be populated with an array of zero or more of the requested resource objects.</li> <li>For &quot;retrieve&quot; routes, the <code>data</code> property must be populated with a single resource object.</li> <li>If the requested single resource, or sub-resource (embedded document) does not exist, a 404 error response should be sent.</li></ul> <h4 id="example-data-response"><a href="#example-data-response" class="header-anchor">#</a> Example Data Response</h4> <p>GET /api/crap</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;641f45cc4de5a0f56bbc702e&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Some Crap&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Some great crap&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;images&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;https://storage.googleapis.com/crapper-images/18237102837103-some_crap.png&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AVAILABLE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;66136751ed1aed6ce50e1d92&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tim&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-04-09T20:39:56.459Z&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;updatedAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-04-09T20:39:56.459Z&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="example-errors-response"><a href="#example-errors-response" class="header-anchor">#</a> Example Errors Response</h4> <p>GET /api/crap/[bad_id]</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// Status 404</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Crap with id [bad_id] not found&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="example-unauthenticated-response"><a href="#example-unauthenticated-response" class="header-anchor">#</a> Example Unauthenticated Response</h4> <p>GET /api/crap/
headers: {
Authorization: 'Invalid or missing JWT'
}</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// Status 401</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Unauthenticated&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="auth-routes"><a href="#auth-routes" class="header-anchor">#</a> Auth Routes</h2> <p>The user management actions will be exposed separately from the main API routes and will use the <code>/auth</code> route prefix.</p> <table><thead><tr><th style="text-align:left;">Action</th> <th style="text-align:left;">Method</th> <th style="text-align:left;">Resource Path</th></tr></thead> <tbody><tr><td style="text-align:left;">Authenticate User</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">/auth/google?redirect_url</td></tr> <tr><td style="text-align:left;">Accept google response</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">/auth/google/callback</td></tr></tbody></table> <p>Successful authenticated response from google at <code>auth/google/callback</code> will redirect to the <code>redirect_url</code> provided to <code>auth/google</code>, and will include the jwt token in the response query params. Ex <code>http://localhost:3000/login-succes?token=ey.asdfasdf...</code></p> <h2 id="api-routes"><a href="#api-routes" class="header-anchor">#</a> API Routes</h2> <p>The primary application capabilities will be grouped under the <code>/api</code> resource route prefix. All routes will be limited to authorized users. The client application must send a valid JWT in the <code>Authorization</code> header property for all <code>/api</code> routes.</p> <h3 id="crap-routes"><a href="#crap-routes" class="header-anchor">#</a> Crap Routes</h3> <table><thead><tr><th style="text-align:left;">Action</th> <th style="text-align:left;">Method</th> <th style="text-align:left;">Resource Path</th> <th style="text-align:left;">Notes</th></tr></thead> <tbody><tr><td style="text-align:left;">List all crap (taken crap excluded)</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">/api/crap</td> <td style="text-align:left;">See <code>Text/Location Search</code> section below</td></tr> <tr><td style="text-align:left;">Get details for a crap</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">/api/crap/:id</td> <td style="text-align:left;">See <code>Get One</code> section below</td></tr> <tr><td style="text-align:left;">List all crap belonging to me (buyer or seller)</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">/api/crap/mine</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Create a crap</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Replace a crap</td> <td style="text-align:left;">PUT</td> <td style="text-align:left;">/api/crap/:id</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Update a crap</td> <td style="text-align:left;">PATCH</td> <td style="text-align:left;">/api/crap/:id</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Remove a crap</td> <td style="text-align:left;">DELETE</td> <td style="text-align:left;">/api/crap/:id</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Buyer lets Seller know they are interested</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/interested</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr> <tr><td style="text-align:left;">Seller adds address and suggested time</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/suggest</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr> <tr><td style="text-align:left;">Buyer agrees to get the crap</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/agree</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr> <tr><td style="text-align:left;">Buyer disagrees with the suggested time</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/disagree</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr> <tr><td style="text-align:left;">Buyer or seller no want to start over</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/reset</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr> <tr><td style="text-align:left;">Seller indicates the crap has been flushed</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">/api/crap/:id/flush</td> <td style="text-align:left;">See <code>Buyer/Seller Flow</code> section below</td></tr></tbody></table> <h3 id="text-location-search"><a href="#text-location-search" class="header-anchor">#</a> Text/Location Search</h3> <p>The get all route will be a text search that returns any <strong>Crap</strong> that has a title OR description that matches or partially matches the text input AND it will look only for Crap within a given distance away from the starting point, sorted by closest to the starting point. These values will be provided in query params:</p> <table><thead><tr><th style="text-align:left;">Name</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">query</td> <td style="text-align:left;">string</td> <td style="text-align:left;">the text search</td></tr> <tr><td style="text-align:left;">lat</td> <td style="text-align:left;">number</td> <td style="text-align:left;">the latitude of the search origin</td></tr> <tr><td style="text-align:left;">long</td> <td style="text-align:left;">number</td> <td style="text-align:left;">the longitude of the search origin</td></tr> <tr><td style="text-align:left;">distance</td> <td style="text-align:left;">number</td> <td style="text-align:left;">the maxDistance the search will return a resource for (in meters)</td></tr> <tr><td style="text-align:left;">show_taken</td> <td style="text-align:left;">boolean</td> <td style="text-align:left;">if true, show crap with status !== <code>FLUSHED</code>. if false / absent, show only crap with status <code>AVAILABLE</code></td></tr></tbody></table> <p>Additional requirements:</p> <ul><li>The following sensitive information should not be in the response:
<ul><li>location</li> <li>buyer</li> <li>suggestion</li></ul></li> <li>The owner property should be populated from the <strong>User</strong> model with name only. GOOGLE ID should not be in the response.</li></ul> <h3 id="get-one"><a href="#get-one" class="header-anchor">#</a> Get One</h3> <p>The get one route will respond with its data populated, but the following sensitive properties will only be available to the Buyer or the Seller, other users will not see these properties:</p> <ul><li>location</li> <li>buyer</li> <li>suggestion</li></ul> <p>The owner and buyer properties will be populated from the <strong>User</strong> model with name only. GOOGLE ID should not be in the response.</p> <h3 id="buyer-seller-flow"><a href="#buyer-seller-flow" class="header-anchor">#</a> Buyer/Seller Flow</h3> <p>A buyer and seller will follow the following flow to complete the crap life cycle:</p> <ul><li><p>Seller creates a Crap. POST <code>/api/crap</code>.</p> <ul><li>status set to <code>AVAILABLE</code></li></ul></li> <li><p>Buyer lets Seller know they are interested in the crap. POST <code>/api/crap/:id/interested</code>.</p> <ul><li>if status is not <code>AVAILABLE</code>, throw a Bad Request Error</li> <li>status set to <code>INTERESTED</code></li> <li>buyer ObjectId is added to the <strong>Crap</strong></li></ul></li> <li><p>Seller adds address and suggests a date. POST <code>/api/crap/:id/suggest</code>.</p> <ul><li>if status is not <code>INTERESTED</code>, throw a Bad Request Error</li> <li>if authenticated user is not the owner of the crap, throw a Forbidden Error.</li> <li>status set to <code>SCHEDULED</code></li> <li>suggestion is added to the <strong>Crap</strong></li></ul></li> <li><p>Buyer agrees to get the crap. POST <code>/api/crap/:id/agree</code>.</p> <ul><li>if status is not <code>SCHEDULED</code>, throw a Bad Request Error</li> <li>if authenticated user is not the buyer of the crap, throw a Forbidden Error.</li> <li>status set to <code>AGREED</code></li></ul></li> <li><p>Buyer disagrees with the suggested time. POST <code>/api/crap/:id/disagree</code>.</p> <ul><li>if status is not <code>SCHEDULED</code>, throw a Bad Request Error</li> <li>if authenticated user is not the buyer of the crap, throw a Forbidden Error.</li> <li>status set back to <code>INTERESTED</code></li> <li>remove suggestion from <strong>Crap</strong> (set to null is fine)</li></ul></li> <li><p>Buyer or Seller want to start over. POST <code>/api/crap/:id/reset</code>.</p> <ul><li>if status is <code>FLUSHED</code>, throw a Bad Request Error</li> <li>if authenticated user is not the buyer or seller of the crap, throw a Forbidden Error.</li> <li>status set to <code>AVAILABLE</code></li> <li>remove buyer</li> <li>remove suggestion</li></ul></li> <li><p>Buyer indicated the crap has been flushed. POST <code>/api/crap/:id/flush</code>.</p> <ul><li>if status is not <code>AGREED</code>, throw a Bad Request Error</li> <li>if authenticated user is not the seller of the crap, throw a Forbidden Error.</li> <li>status set to <code>FLUSHED</code></li></ul></li></ul> <h2 id="resource-schema"><a href="#resource-schema" class="header-anchor">#</a> Resource Schema</h2> <p>There are two required model classes. Their schema requirements are listed below.</p> <div class="custom-block tip"><p class="custom-block-title">Remember</p> <p>Mongoose will automatically create the <code>_id</code> property for all objects.</p></div> <h3 id="crap"><a href="#crap" class="header-anchor">#</a> Crap</h3> <table><thead><tr><th style="text-align:left;">Property</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Notes</th></tr></thead> <tbody><tr><td style="text-align:left;">title</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">minLength 3, maxLength: 255</td></tr> <tr><td style="text-align:left;">description</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">minLength 3, maxLength: 255</td></tr> <tr><td style="text-align:left;">location</td> <td style="text-align:left;">Point</td> <td style="text-align:left;">true</td> <td style="text-align:left;">Use an embedded pointSchema</td></tr> <tr><td style="text-align:left;">images</td> <td style="text-align:left;">[String]</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">status</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">See <code>Status Enum</code> section below</td></tr> <tr><td style="text-align:left;">owner</td> <td style="text-align:left;">ObjectId ref -&gt; User</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">buyer</td> <td style="text-align:left;">ObjectId ref -&gt; User</td> <td style="text-align:left;">false</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">suggestion</td> <td style="text-align:left;">Suggestion</td> <td style="text-align:left;">false</td> <td style="text-align:left;">Use an embedded suggestionSchema</td></tr> <tr><td style="text-align:left;">createdAt</td> <td style="text-align:left;">Date</td> <td style="text-align:left;">handled by mongoose</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">updatedAt</td> <td style="text-align:left;">Date</td> <td style="text-align:left;">handled by mongoose</td> <td style="text-align:left;"></td></tr></tbody></table> <p>The <code>createdAt</code> and <code>updatedAt</code> properties should be <a href="https://mongoosejs.com/docs/guide.html#timestamps" target="_blank" rel="noopener noreferrer">set automatically by the database<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Any client supplied data for these two properties should be discarded.</p> <h3 id="user"><a href="#user" class="header-anchor">#</a> User</h3> <table><thead><tr><th style="text-align:left;">Property</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Unique</th> <th style="text-align:left;">Notes</th></tr></thead> <tbody><tr><td style="text-align:left;">name</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td> <td style="text-align:left;">comes from google</td></tr> <tr><td style="text-align:left;">googleId</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">true</td> <td style="text-align:left;">comes from google</td></tr> <tr><td style="text-align:left;">createdAt</td> <td style="text-align:left;">Date</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td> <td style="text-align:left;">handled by mongoose</td></tr> <tr><td style="text-align:left;">updatedAt</td> <td style="text-align:left;">Date</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td> <td style="text-align:left;">handled by mongoose</td></tr></tbody></table> <h3 id="status-enum"><a href="#status-enum" class="header-anchor">#</a> Status Enum</h3> <p>Crap can have one of the following statuses:</p> <ul><li>AVAILABLE</li> <li>INTERESTED</li> <li>SCHEDULED</li> <li>AGREED</li> <li>FLUSHED</li></ul> <h3 id="embedded-schemas"><a href="#embedded-schemas" class="header-anchor">#</a> Embedded Schemas</h3> <p>The following schemas can be used to define the <code>location</code> and <code>suggestion</code> properties of the <strong>Crap</strong> model. I recommended setting <code>{ _id: false}</code> as they do not need an _id.</p> <div class="custom-block danger"><p class="custom-block-title">These should not become collections in mongodb!</p> <span class="micro"></span></div> <h4 id="point"><a href="#point" class="header-anchor">#</a> Point</h4> <table><thead><tr><th style="text-align:left;">Property</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Notes</th></tr></thead> <tbody><tr><td style="text-align:left;">type</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">Always should be <code>Point</code></td></tr> <tr><td style="text-align:left;">coordinates</td> <td style="text-align:left;">[Number]</td> <td style="text-align:left;">true</td> <td style="text-align:left;">Always should be length 2</td></tr></tbody></table> <h4 id="suggestion"><a href="#suggestion" class="header-anchor">#</a> Suggestion</h4> <table><thead><tr><th style="text-align:left;">Property</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Notes</th></tr></thead> <tbody><tr><td style="text-align:left;">address</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;">minLength 3, maxLength: 255</td></tr> <tr><td style="text-align:left;">date</td> <td style="text-align:left;">Date</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">time</td> <td style="text-align:left;">String</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="deployment"><a href="#deployment" class="header-anchor">#</a> Deployment</h2> <p>Your final application needs to be deployed to the cloud for the world to enjoy! We will use <a href="https://dashboard.render.com/" target="_blank" rel="noopener noreferrer">Render<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> again for this project. Take care to:</p> <ul><li>use the correct <code>Production</code> environment variables
<ul><li>Render allows your to store a <em>Secret File</em>. Make sure to update the <code>GOOGLE_STORAGE_SECRET_PATH</code> to match!!!!</li></ul></li> <li>use the Mongo Atlas database you created in Hybrid Assignment 2 for your database.</li> <li>update Google Cloud credentials Authorized JavaScript origins and redirect URIs to match your production urls.</li> <li>ensure your cors policy is correct (* is a valid option)</li></ul> <h2 id="logistics"><a href="#logistics" class="header-anchor">#</a> Logistics</h2> <ul><li>Create a new <code>private</code> repository on Github.</li> <li>Clone the repo to your laptop.</li> <li>Initialize the repository <code>yarn init</code> (make sure to fill it out with correct values)</li> <li>Install dependencies with <code>yarn</code>.</li> <li>Build the project on your laptop.</li> <li>Test each route with Postman, making sure to test <em>both</em> valid and invalid data.</li> <li>Make git commits as you complete each requirement.</li> <li>When everything is complete, push the final commit back up to GitHub</li> <li>Submit <strong>both</strong> URLs on BrightSpace: the GitHub repo URL and the URL to your deployed Render API.</li></ul> <div class="custom-block tip"><p class="custom-block-title">Remember</p> <p>Pay attention to clean code practices.</p></div> <h2 id="code-knowledge-interview"><a href="#code-knowledge-interview" class="header-anchor">#</a> Code Knowledge Interview</h2> <p>With ChatGPT and other AI services becoming more, I will be doing a brief interview with each group to discuss various parts of the code, and the choices made to implement the requirements to see how well you understand the material. This interview will be worth 15% of the overall mark of the project, so make sure you understand fully what you are adding to your code base.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/1/2024, 7:09:00 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/s2024/assets/js/app.40d35fb0.js" defer></script><script src="/s2024/assets/js/2.d13f26af.js" defer></script><script src="/s2024/assets/js/1.f6f71081.js" defer></script><script src="/s2024/assets/js/42.fcb0df3f.js" defer></script><script src="/s2024/assets/js/31.e47a0c3f.js" defer></script>
  </body>
</html>
